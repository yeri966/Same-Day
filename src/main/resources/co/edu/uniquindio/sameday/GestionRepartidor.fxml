<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<ScrollPane fitToWidth="true" fitToHeight="true" style="-fx-background-color: #f8fafc;"
            xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.edu.uniquindio.sameday.controllers.GestionCrudRepartidorController">

    <content>
        <AnchorPane prefHeight="800.0" prefWidth="950.0" style="-fx-background-color: #f8fafc;">
            <children>
                <!-- ENCABEZADO -->
                <Label layoutX="30.0" layoutY="20.0" text="GestiÃ³n de Repartidores" textFill="#1e293b">
                    <font>
                        <Font name="System Bold" size="26.0" />
                    </font>
                </Label>

                <Label layoutX="30.0" layoutY="55.0" text="Administra la informaciÃ³n de los repartidores registrados" textFill="#64748b">
                    <font>
                        <Font size="13.0" />
                    </font>
                </Label>

                <Separator layoutX="30.0" layoutY="80.0" prefWidth="890.0" />

                <!-- FORMULARIO -->
                <VBox layoutX="30.0" layoutY="95.0" prefHeight="230.0" prefWidth="910.0" spacing="12.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-color: #e2e8f0; -fx-border-radius: 10; -fx-border-width: 2;">
                    <padding>
                        <Insets bottom="12.0" left="15.0" right="15.0" top="12.0" />
                    </padding>
                    <children>
                        <Label text="ðŸšš Formulario de Repartidor" textFill="#1e293b">
                            <font>
                                <Font name="System Bold" size="15.0" />
                            </font>
                        </Label>

                        <GridPane hgap="15.0" vgap="12.0">
                            <columnConstraints>
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="70.0" prefWidth="70.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="160.0" prefWidth="160.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="80.0" prefWidth="80.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="180.0" prefWidth="180.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="70.0" prefWidth="70.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="180.0" prefWidth="180.0" />
                            </columnConstraints>
                            <rowConstraints>
                                <RowConstraints minHeight="32.0" prefHeight="32.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="32.0" prefHeight="32.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="32.0" prefHeight="32.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="32.0" prefHeight="32.0" vgrow="SOMETIMES" />
                            </rowConstraints>

                            <!-- FILA 1: ID, Documento y Nombre -->
                            <Label style="-fx-alignment: center-right;" text="ID:" textFill="#475569" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <TextField fx:id="txtId" editable="false" promptText="Auto" style="-fx-background-color: #f1f5f9; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10; -fx-opacity: 0.7;" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </TextField>

                            <Label style="-fx-alignment: center-right;" text="Documento:" textFill="#475569" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <TextField fx:id="txtDocumento" promptText="CÃ©dula" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10;" GridPane.columnIndex="3" GridPane.rowIndex="0">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </TextField>

                            <Label style="-fx-alignment: center-right;" text="Nombre:" textFill="#475569" GridPane.columnIndex="4" GridPane.rowIndex="0">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <TextField fx:id="txtNombre" promptText="Nombre completo" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10;" GridPane.columnIndex="5" GridPane.rowIndex="0">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </TextField>

                            <!-- FILA 2: Correo, TelÃ©fono y Ciudad -->
                            <Label style="-fx-alignment: center-right;" text="Correo:" textFill="#475569" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <TextField fx:id="txtCorreo" promptText="email@ejemplo.com" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10;" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </TextField>

                            <Label style="-fx-alignment: center-right;" text="TelÃ©fono:" textFill="#475569" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <TextField fx:id="txtTelefono" promptText="3001234567" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10;" GridPane.columnIndex="3" GridPane.rowIndex="1">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </TextField>

                            <Label style="-fx-alignment: center-right;" text="Ciudad:" textFill="#475569" GridPane.columnIndex="4" GridPane.rowIndex="1">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <ComboBox fx:id="cboxCity" maxWidth="Infinity" promptText="Seleccione ciudad" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5;" GridPane.columnIndex="5" GridPane.rowIndex="1">
                                <padding>
                                    <Insets bottom="6.0" left="10.0" right="10.0" top="6.0" />
                                </padding>
                            </ComboBox>

                            <!-- FILA 3: Usuario y ContraseÃ±a -->
                            <Label style="-fx-alignment: center-right;" text="Usuario:" textFill="#475569" GridPane.columnIndex="0" GridPane.rowIndex="2">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <TextField fx:id="txtUsuario" promptText="Nombre de usuario" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10;" GridPane.columnIndex="1" GridPane.rowIndex="2">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </TextField>

                            <Label style="-fx-alignment: center-right;" text="ContraseÃ±a:" textFill="#475569" GridPane.columnIndex="2" GridPane.rowIndex="2">
                                <font>
                                    <Font name="System Bold" size="13.0" />
                                </font>
                            </Label>
                            <PasswordField fx:id="txtPassword" promptText="ContraseÃ±a de acceso" style="-fx-background-color: white; -fx-border-color: #cbd5e1; -fx-border-radius: 6; -fx-background-radius: 6; -fx-border-width: 1.5; -fx-padding: 6 10;" GridPane.columnIndex="3" GridPane.rowIndex="2">
                                <font>
                                    <Font size="12.0" />
                                </font>
                            </PasswordField>

                            <!-- FILA 4: Nota informativa -->
                            <Label style="-fx-alignment: center-left; -fx-font-style: italic;" text="ðŸ’¡ Al actualizar, deja la contraseÃ±a vacÃ­a para mantener la actual" textFill="#64748b" GridPane.columnIndex="0" GridPane.columnSpan="6" GridPane.rowIndex="3">
                                <font>
                                    <Font size="11.0" />
                                </font>
                            </Label>
                        </GridPane>
                    </children>
                </VBox>

                <!-- BOTONES DE ACCIÃ“N -->
                <HBox alignment="CENTER_LEFT" layoutX="30.0" layoutY="340.0" spacing="12.0">
                    <children>
                        <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAdd" prefHeight="40.0" prefWidth="115.0" style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" text="âž• Agregar">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Button>

                        <Button fx:id="updateButton" disable="true" mnemonicParsing="false" onAction="#handleUpdate" prefHeight="40.0" prefWidth="115.0" style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" text="âœï¸ Actualizar">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Button>

                        <Button fx:id="clearButton" mnemonicParsing="false" onAction="#handleClear" prefHeight="40.0" prefWidth="115.0" style="-fx-background-color: #64748b; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" text="ðŸ§¹ Limpiar">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Button>

                        <!-- NUEVOS BOTONES PARA PATRÃ“N STATE -->
                        <Button fx:id="btnSuspender" mnemonicParsing="false" onAction="#onSuspenderCuenta" prefHeight="40.0" prefWidth="115.0" style="-fx-background-color: #f59e0b; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" text="ðŸš« Suspender">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Button>

                        <Button fx:id="btnActivar" mnemonicParsing="false" onAction="#onActivarCuenta" prefHeight="40.0" prefWidth="115.0" style="-fx-background-color: #22c55e; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" text="âœ… Activar">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Button>
                    </children>
                </HBox>

                <Label layoutX="30.0" layoutY="385.0" style="-fx-font-style: italic;" text="ðŸ’¡ Seleccione un repartidor de la tabla para editar, suspender o activar su cuenta" textFill="#64748b">
                    <font>
                        <Font size="11.0" />
                    </font>
                </Label>

                <Separator layoutX="30.0" layoutY="405.0" prefWidth="890.0" />

                <!-- TABLA DE REPARTIDORES -->
                <VBox layoutX="30.0" layoutY="420.0" prefWidth="890.0" spacing="8.0">
                    <children>
                        <Label text="ðŸšš Lista de Repartidores Registrados" textFill="#1e293b">
                            <font>
                                <Font name="System Bold" size="15.0" />
                            </font>
                        </Label>

                        <TableView fx:id="dealerTable" prefHeight="280.0" prefWidth="890.0" style="-fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-border-width: 2;">
                            <columns>
                                <TableColumn fx:id="colId" prefWidth="60.0" text="ID" />
                                <TableColumn fx:id="colDocumento" prefWidth="100.0" text="Documento" />
                                <TableColumn fx:id="colNombre" prefWidth="140.0" text="Nombre" />
                                <TableColumn fx:id="colCorreo" prefWidth="140.0" text="Correo" />
                                <TableColumn fx:id="colTelefono" prefWidth="90.0" text="TelÃ©fono" />
                                <TableColumn fx:id="colCity" prefWidth="80.0" text="Ciudad" />
                                <TableColumn fx:id="colUsuario" prefWidth="80.0" text="Usuario" />
                                <TableColumn fx:id="colDisponible" prefWidth="90.0" text="Disponible" />
                                <TableColumn fx:id="colEstadoCuenta" prefWidth="90.0" text="Estado Cuenta" />
                            </columns>
                        </TableView>

                        <!-- ESTADÃSTICAS Y BOTÃ“N ELIMINAR -->
                        <HBox alignment="CENTER_LEFT" spacing="25.0">
                            <padding>
                                <Insets top="2.0" />
                            </padding>
                            <children>
                                <Label fx:id="lblTotalRepartidores" text="ðŸ“Š Total: 0" textFill="#475569">
                                    <font>
                                        <Font name="System Bold" size="13.0" />
                                    </font>
                                </Label>

                                <Label fx:id="lblRepartidoresDisponibles" text="âœ… Disponibles: 0" textFill="#475569">
                                    <font>
                                        <Font name="System Bold" size="13.0" />
                                    </font>
                                </Label>

                                <HBox HBox.hgrow="ALWAYS" />

                                <Button fx:id="deleteButton" disable="true" mnemonicParsing="false" onAction="#handleDelete" prefHeight="38.0" prefWidth="130.0" style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" text="ðŸ—‘ï¸ Eliminar">
                                    <font>
                                        <Font size="12.0" />
                                    </font>
                                </Button>
                            </children>
                        </HBox>
                    </children>
                </VBox>
            </children>
        </AnchorPane>
    </content>
</ScrollPane>